import{a as b}from"./chunk-TQ5346PH.js";import{E as $,L as N,R as B,r as s,s as y,t as C,u as V,v as j,w as S,y as F,z as x}from"./chunk-OVGWJSSC.js";import{B as _,Ca as v,Cb as L,Da as q,Eb as h,H as c,Hb as E,N as u,O as f,Pa as d,Ra as U,ea as n,fa as l,ib as k,jb as A,ma as I,oa as m,q as R,qb as P,sa as a,ta as p,ua as g,w as D,x as G,z as M}from"./chunk-6O4OQCOI.js";var O=(()=>{let t=class t{constructor(o,i,r){this.accountService=o,this.router=i,this.activatedRoute=r,this.loginForm=new V({email:new j("",[s.required,s.email]),password:new j("",s.required)}),this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop"}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>this.router.navigateByUrl(this.returnUrl)})}};t.\u0275fac=function(i){return new(i||t)(l(b),l(h),l(L))},t.\u0275cmp=u({type:t,selectors:[["app-login"]],decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","label","type"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),v("ngSubmit",function(){return r.onSubmit()}),a(3,"div",3)(4,"h1",4),d(5,"Login"),p()(),g(6,"app-text-input",5)(7,"app-text-input",6),a(8,"div",7)(9,"button",8),d(10," Sign In "),p()()()()()),i&2&&(n(2),m("formGroup",r.loginForm),n(4),m("formControl",r.loginForm.controls.email)("label","Email Address"),n(),m("formControl",r.loginForm.controls.password)("label","Password")("type","password"),n(2),m("disabled",r.loginForm.invalid))},dependencies:[S,y,C,F,x,N]});let e=t;return e})();function X(e,t){if(e&1&&(a(0,"li"),d(1),p()),e&2){let w=t.$implicit;n(),U(" ",w," ")}}function Y(e,t){if(e&1&&(a(0,"ul",10),I(1,X,2,1,"li",11),p()),e&2){let w=q();n(),m("ngForOf",w.errors)}}var z=(()=>{let t=class t{constructor(o,i,r){this.fb=o,this.accountService=i,this.router=r,this.errors=null,this.complexPassword="(?=^.{6,10}$)(?=.*d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*s).*$",this.registerFrom=this.fb.group({displayName:["",s.required],email:["",[s.required,s.email],[this.validateEmailNotTaken()]],password:["",[s.required,s.pattern(this.complexPassword)]]})}onSubmit(){this.accountService.register(this.registerFrom.value).subscribe({next:()=>this.router.navigateByUrl("/shop"),error:o=>this.errors=o.errors})}validateEmailNotTaken(){return o=>o.valueChanges.pipe(D(1e3),G(1),_(()=>this.accountService.checkEmailExists(o.value).pipe(R(i=>i?{emailExists:!0}:null),M(()=>o.markAllAsTouched))))}};t.\u0275fac=function(i){return new(i||t)(l($),l(b),l(h))},t.\u0275cmp=u({type:t,selectors:[["app-register"]],decls:13,vars:10,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","label","type"],["class","text-danger list-unstyled",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),v("ngSubmit",function(){return r.onSubmit()}),a(3,"div",3)(4,"h1",4),d(5,"Sign Up"),p()(),g(6,"app-text-input",5)(7,"app-text-input",5)(8,"app-text-input",6),I(9,Y,2,1,"ul",7),a(10,"div",8)(11,"button",9),d(12," Sign Up "),p()()()()()),i&2&&(n(2),m("formGroup",r.registerFrom),n(4),m("formControl",r.registerFrom.controls.displayName)("label","Display Name"),n(),m("formControl",r.registerFrom.controls.email)("label","Email Address"),n(),m("formControl",r.registerFrom.controls.password)("label","Password")("type","password"),n(),m("ngIf",r.errors),n(2),m("disabled",r.registerFrom.invalid))},dependencies:[k,A,S,y,C,F,x,N]});let e=t;return e})();var tt=[{path:"login",component:O},{path:"register",component:z}],Z=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=f({type:t}),t.\u0275inj=c({imports:[E.forChild(tt),E]});let e=t;return e})();var bt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=f({type:t}),t.\u0275inj=c({imports:[P,Z,B]});let e=t;return e})();export{bt as AccountModule};
