import{$a as H,Bb as Z,Cb as L,Da as d,Eb as ee,Fb as te,G as w,H as A,Hb as re,J as I,Ja as E,Ka as Q,Ma as N,N as D,Na as q,O as $,P as G,Pa as C,Qa as y,Wa as X,Za as R,_a as W,a as c,b as p,ea as u,fa as T,hb as V,ib as z,j as S,jb as J,lb as K,ma as b,mb as U,na as M,oa as l,q as j,qb as Y,sa as h,ta as f,u as k,va as g,wa as x,xa as _}from"./chunk-6O4OQCOI.js";function ae(n,i){n&1&&_(0)}function se(n,i){if(n&1&&(g(0),C(1),x()),n&2){let s=d(2).$implicit;u(),y(s.label)}}var oe=n=>({"xng-breadcrumb-link-disabled":n}),ie=(n,i,s,e,t,r)=>({$implicit:n,info:i,last:s,first:e,index:t,count:r});function ce(n,i){if(n&1&&(h(0,"a",7),b(1,ae,1,0,"ng-container",8)(2,se,2,1,"ng-container",9),f()),n&2){let s=d(),e=s.$implicit,t=s.last,r=s.first,a=s.index,o=s.count,m=d();l("ngClass",X(10,oe,e.disable))("routerLink",e.routeInterceptor?e.routeInterceptor(e.routeLink,e):e.routeLink)("queryParams",m.preserveQueryParams?e.queryParams:void 0)("fragment",m.preserveFragment?e.fragment:void 0)("target",m.anchorTarget?m.anchorTarget:"_self"),M("aria-disabled",e.disable)("tabIndex",e.disable?-1:0),u(),l("ngTemplateOutlet",m.itemTemplate)("ngTemplateOutletContext",R(12,ie,e.label,e.info,t,r,a,o)),u(),l("ngIf",!m.itemTemplate)}}function ue(n,i){n&1&&_(0)}function me(n,i){if(n&1&&(g(0),C(1),x()),n&2){let s=d(2).$implicit;u(),y(s.label)}}function le(n,i){if(n&1&&(h(0,"label",10),b(1,ue,1,0,"ng-container",8)(2,me,2,1,"ng-container",9),f()),n&2){let s=d(),e=s.$implicit,t=s.last,r=s.first,a=s.index,o=s.count,m=d();u(),l("ngTemplateOutlet",m.itemTemplate)("ngTemplateOutletContext",R(3,ie,e.label,e.info,t,r,a,o)),u(),l("ngIf",!m.itemTemplate)}}function de(n,i){n&1&&_(0)}function pe(n,i){if(n&1&&(g(0),C(1),x()),n&2){let s=d(3);u(),y(s.separator)}}function be(n,i){if(n&1&&(h(0,"li",11),b(1,de,1,0,"ng-container",12)(2,pe,2,1,"ng-container",9),f()),n&2){let s=d(2);u(),l("ngTemplateOutlet",s.separatorTemplate),u(),l("ngIf",!s.separatorTemplate)}}function he(n,i){if(n&1&&(g(0),h(1,"li",3),b(2,ce,3,19,"a",4)(3,le,3,10,"label",5),f(),b(4,be,3,2,"li",6),x()),n&2){let s=i.last;u(2),l("ngIf",!s),u(),l("ngIf",s),u(),l("ngIf",!s)}}var fe=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=G({type:i,selectors:[["","xngBreadcrumbItem",""]]});let n=i;return n})(),v={PREFIX:":",REGEX_IDENTIFIER:"/:[^/]+",REGEX_REPLACER:"/[^/]+"},ge="@",ne=n=>n&&Object.keys(n).length>0,xe=(()=>{let i=class i{constructor(e,t){this.activatedRoute=e,this.router=t,this.baseHref="/",this.dynamicBreadcrumbStore=[],this.currentBreadcrumbs=[],this.previousBreadcrumbs=[],this.breadcrumbs=new S([]),this.breadcrumbs$=this.breadcrumbs.asObservable(),this.detectRouteChanges()}detectRouteChanges(){this.setupBreadcrumbs(this.activatedRoute.snapshot),this.router.events.pipe(k(e=>e instanceof Z)).subscribe(e=>{e.shouldActivate&&this.setupBreadcrumbs(e.state.root)})}setupBreadcrumbs(e){this.previousBreadcrumbs=this.currentBreadcrumbs;let t=this.getRootBreadcrumb();this.currentBreadcrumbs=t?[t]:[],this.prepareBreadcrumbList(e,this.baseHref)}getRootBreadcrumb(){let e=this.router.config.find(a=>a.path===""),t=this.extractObject(e?.data?.breadcrumb),r=this.getFromStore(t.alias,"/");if(ne(t)||ne(r))return c(p(c(c({},r),t),{routeLink:this.baseHref}),this.getQueryParamsFromPreviousList("/"))}prepareBreadcrumbItem(e,t){let{path:r,breadcrumb:a}=this.parseRouteData(e.routeConfig),o=this.resolvePathSegment(r,e),m=`${t}${o}`,P=this.getFromStore(a.alias,m),F=this.extractLabel(P?.label||a?.label,o),B=!1,O="";return F||(B=!0,O=o),c(p(c(c({},P),a),{label:B?O:F,routeLink:m,isAutoGeneratedLabel:B}),this.getQueryParamsFromPreviousList(m))}prepareBreadcrumbList(e,t){if(e.routeConfig?.path){let o=this.prepareBreadcrumbItem(e,t);if(this.currentBreadcrumbs.push(o),e.firstChild)return this.prepareBreadcrumbList(e.firstChild,o.routeLink+"/")}else if(e.firstChild)return this.prepareBreadcrumbList(e.firstChild,t);let r=this.currentBreadcrumbs[this.currentBreadcrumbs.length-1];this.setQueryParamsForActiveBreadcrumb(r,e);let a=this.currentBreadcrumbs.filter(o=>!o.skip);this.breadcrumbs.next(a)}getFromStore(e,t){return this.dynamicBreadcrumbStore.find(r=>e&&e===r.alias||t&&t===r.routeLink||this.matchRegex(t,r.routeRegex))}matchRegex(e,t){return e.match(new RegExp(t))?.[0]===e}resolvePathSegment(e,t){return e.includes(v.PREFIX)&&Object.entries(t.params).forEach(([r,a])=>{e=e.replace(`:${r}`,`${a}`)}),e}getQueryParamsFromPreviousList(e){let{queryParams:t,fragment:r}=this.previousBreadcrumbs.find(a=>a.routeLink===e)||{};return{queryParams:t,fragment:r}}setQueryParamsForActiveBreadcrumb(e,t){if(e){let{queryParams:r,fragment:a}=t;e.queryParams=r?c({},r):void 0,e.fragment=a}}parseRouteData(e){let{path:t,data:r}=e,a=this.mergeWithBaseChildData(e,r?.breadcrumb);return{path:t,breadcrumb:a}}mergeWithBaseChildData(e,t){if(!e)return this.extractObject(t);let r;e.loadChildren?r=e._loadedRoutes.find(o=>o.path===""):e.children&&(r=e.children.find(o=>o.path===""));let a=r?.data?.breadcrumb;return a?this.mergeWithBaseChildData(r,c(c({},this.extractObject(t)),this.extractObject(a))):this.extractObject(t)}set(e,t){let r=this.extractObject(t),a;e.startsWith(ge)?a=["alias",p(c({},r),{alias:e.slice(1)})]:e.includes(v.PREFIX)?a=["routeRegex",p(c({},r),{routeRegex:this.buildRegex(e)})]:a=["routeLink",p(c({},r),{routeLink:this.ensureLeadingSlash(e)})],a[1].isAutoGeneratedLabel=!1,this.updateStore(...a),this.updateCurrentBreadcrumbs(...a)}updateStore(e,t){let r=this.dynamicBreadcrumbStore.findIndex(a=>t[e]===a[e]);r>-1?this.dynamicBreadcrumbStore[r]=c(c({},this.dynamicBreadcrumbStore[r]),t):this.dynamicBreadcrumbStore.push(c({},t))}updateCurrentBreadcrumbs(e,t){let r=this.currentBreadcrumbs.findIndex(a=>e==="routeRegex"?this.matchRegex(a.routeLink,t[e]):t[e]===a[e]);if(r>-1){this.currentBreadcrumbs[r]=c(c({},this.currentBreadcrumbs[r]),t);let a=this.currentBreadcrumbs.filter(o=>!o.skip);this.breadcrumbs.next([...a])}}buildRegex(e){return this.ensureLeadingSlash(e).replace(new RegExp(v.REGEX_IDENTIFIER,"g"),v.REGEX_REPLACER)}ensureLeadingSlash(e){return e.startsWith("/")?e:`/${e}`}extractLabel(e,t){let r=typeof e=="object"?e.label:e;return typeof r=="function"?r(t):r}extractObject(e){return e&&(typeof e=="string"||typeof e=="function")?{label:e}:e||{}}};i.\u0275fac=function(t){return new(t||i)(I(L),I(ee))},i.\u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),ke=(()=>{let i=class i{set separator(e){e instanceof E?(this.separatorTemplate=e,this._separator=void 0):(this.separatorTemplate=void 0,this._separator=e||"/")}get separator(){return this._separator}constructor(e,t){this.breadcrumbService=e,this._separator="/",this.autoGenerate=!0,this.preserveQueryParams=!0,this.preserveFragment=!0,this.class="",this.setupMessage="not set up yet",this.someParameterValue=null,t.params.subscribe(r=>{this.setupComponent(r.someParam)})}setupComponent(e){this.setupMessage="set up at "+new Date,this.someParameterValue=e}ngOnInit(){this.breadcrumbs$=this.breadcrumbService.breadcrumbs$.pipe(j(e=>e.filter(t=>this.autoGenerate?!0:!t.isAutoGeneratedLabel).map(t=>{let{routeInterceptor:r,routeLink:a}=t;return p(c({},t),{routeLink:r?.(a,t)||a})})))}};i.\u0275fac=function(t){return new(t||i)(T(xe),T(L))},i.\u0275cmp=D({type:i,selectors:[["xng-breadcrumb"]],contentQueries:function(t,r,a){if(t&1&&Q(a,fe,5,E),t&2){let o;N(o=q())&&(r.itemTemplate=o.first)}},inputs:{autoGenerate:"autoGenerate",preserveQueryParams:"preserveQueryParams",preserveFragment:"preserveFragment",class:"class",anchorTarget:"anchorTarget",separator:"separator"},decls:4,vars:4,consts:[["aria-label","breadcrumb",1,"xng-breadcrumb-root",3,"ngClass"],[1,"xng-breadcrumb-list"],[4,"ngFor","ngForOf"],[1,"xng-breadcrumb-item"],["class","xng-breadcrumb-link","rel","noopener noreferrer",3,"ngClass","routerLink","queryParams","fragment","target",4,"ngIf"],["class","xng-breadcrumb-trail",4,"ngIf"],["class","xng-breadcrumb-separator","aria-hidden","true",4,"ngIf"],["rel","noopener noreferrer",1,"xng-breadcrumb-link",3,"ngClass","routerLink","queryParams","fragment","target"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"xng-breadcrumb-trail"],["aria-hidden","true",1,"xng-breadcrumb-separator"],[4,"ngTemplateOutlet"]],template:function(t,r){t&1&&(h(0,"nav",0)(1,"ol",1),b(2,he,5,3,"ng-container",2),W(3,"async"),f()()),t&2&&(l("ngClass",r.class),u(2),l("ngForOf",H(3,2,r.breadcrumbs$)))},dependencies:[V,z,J,K,te,U],styles:[`.xng-breadcrumb-root{margin:0}.xng-breadcrumb-list{display:flex;align-items:center;flex-wrap:wrap;margin:0;padding:0}.xng-breadcrumb-item{list-style:none}.xng-breadcrumb-trail{display:flex;align-items:center}.xng-breadcrumb-link{display:flex;align-items:center;white-space:nowrap;color:inherit;text-decoration:none;transition:-webkit-text-decoration .3s;transition:text-decoration .3s;transition:text-decoration .3s,-webkit-text-decoration .3s;cursor:pointer}.xng-breadcrumb-link:hover{text-decoration:underline}.xng-breadcrumb-link-disabled{pointer-events:none;cursor:disabled}.xng-breadcrumb-separator{display:flex;-webkit-user-select:none;user-select:none;margin-left:8px;margin-right:8px}
`],encapsulation:2});let n=i;return n})(),we=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=$({type:i}),i.\u0275inj=A({imports:[Y,re]});let n=i;return n})();export{fe as a,xe as b,ke as c,we as d};
